<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal de Acesso - Conexo</title>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Google Fonts: Inter e Source Code Pro para o tema de terminal -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Estilos da Página de Login -->
    <link rel="stylesheet" href="front/css/login-style.css">
    <!-- Tone.js para efeitos sonoros -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
</head>
<body class="auth-page dark-theme">

    <!-- Fundo animado de galáxia -->
    <canvas id="galaxy-canvas"></canvas>

    <main class="terminal-container">
        <div class="terminal-header">
            <h1 class="terminal-title">[ TERMINAL DE ACESSO CONEXOS ]</h1>
        </div>
        
        <div class="terminal-body">
            <!-- Conteúdo dinâmico (Login/Registro) -->
            <div id="login-form-content">
                <h2 class="form-title-scanline">Aguardando Identificação do Piloto...</h2>
            </div>
             <div id="register-form-content" class="form-hidden">
                <h2 class="form-title-scanline">Iniciando Protocolo de Alistamento...</h2>
            </div>

            <!-- Botões de alternância -->
            <div class="form-toggle">
                <div class="toggle-slider"></div>
                <button id="show-login-btn" class="toggle-btn active">Acessar</button>
                <button id="show-register-btn" class="toggle-btn">Alistamento</button>
            </div>

            <!-- Formulário de Login -->
            <form id="login-form" action="front/pages/feed.html" method="get">
                <div class="form-group">
                    <i class="fa-solid fa-user-astronaut form-icon"></i>
                    <input type="email" id="login-email" class="form-input" placeholder=" " required>
                    <label for="login-email" class="form-label">ID do Piloto (Email)</label>
                </div>
                <div class="form-group">
                    <i class="fa-solid fa-key form-icon"></i>
                    <input type="password" id="login-password" class="form-input" placeholder=" " required>
                    <label for="login-password" class="form-label">Senha de Acesso</label>
                </div>
                <button type="submit" class="btn-primary btn-submit">
                    <i class="fa-solid fa-rocket"></i> ENGAJAR PROPULSORES
                </button>
            </form>

            <!-- Formulário de Registro -->
            <form id="register-form" action="front/pages/feed.html" method="get" class="form-hidden">
                 <div class="form-group">
                    <i class="fa-solid fa-signature form-icon"></i>
                    <input type="text" id="register-username" class="form-input" placeholder=" " required>
                    <label for="register-username" class="form-label">Designação do Cadete</label>
                </div>
                <div class="form-group">
                    <i class="fa-solid fa-envelope form-icon"></i>
                    <input type="email" id="register-email" class="form-input" placeholder=" " required>
                    <label for="register-email" class="form-label">Registro de Comunicação (Email)</label>
                </div>
                <div class="form-group">
                    <i class="fa-solid fa-shield-halved form-icon"></i>
                    <input type="password" id="register-password" class="form-input" placeholder=" " required>
                    <label for="register-password" class="form-label">Código de Segurança</label>
                </div>
                 <button type="submit" class="btn-primary btn-submit">
                    <i class="fa-solid fa-user-plus"></i> COMPLETAR ALISTAMENTO
                 </button>
            </form>
        </div>

        <div class="terminal-footer">
            <p>Status do Sistema: <span id="system-status-text"></span></p>
        </div>
    </main>

    <!-- JavaScript Embutido -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let hyperspaceEngaged = false;
            
            // --- INICIALIZAÇÃO DE SOM ---
            const synth = new Tone.Synth({
                oscillator: { type: 'sine' },
                envelope: { attack: 0.005, decay: 0.1, sustain: 0.3, release: 0.1 }
            }).toDestination();
            
            const playSound = (note, duration = '16n') => {
                if (Tone.context.state !== 'running') {
                    Tone.start();
                }
                synth.triggerAttackRelease(note, duration);
            };

            // Lógica para alternar entre os formulários
            const showLoginBtn = document.getElementById('show-login-btn');
            const showRegisterBtn = document.getElementById('show-register-btn');
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const loginContent = document.getElementById('login-form-content');
            const registerContent = document.getElementById('register-form-content');
            const toggleSlider = document.querySelector('.toggle-slider');

            showLoginBtn.addEventListener('click', () => {
                playSound('C4');
                switchForm('login');
            });
            showRegisterBtn.addEventListener('click', () => {
                playSound('E4');
                switchForm('register');
            });

            function switchForm(formToShow) {
                const isLogin = formToShow === 'login';
                loginForm.classList.toggle('form-hidden', !isLogin);
                registerForm.classList.toggle('form-hidden', isLogin);
                loginContent.classList.toggle('form-hidden', !isLogin);
                registerContent.classList.toggle('form-hidden', isLogin);
                showLoginBtn.classList.toggle('active', isLogin);
                showRegisterBtn.classList.toggle('active', !isLogin);
                toggleSlider.style.transform = isLogin ? 'translateX(0%)' : 'translateX(100%)';
            }
            
            // --- EFEITOS SONOROS DA UI ---
            document.querySelectorAll('.form-input').forEach(input => {
                input.addEventListener('focus', () => playSound('A2', '32n'));
            });
            document.querySelectorAll('.btn-submit').forEach(btn => {
                btn.addEventListener('mousedown', () => playSound('G4'));
            });

            // --- LÓGICA DE LOGIN COM HIPERESPAÇO ---
            const handleLogin = (event) => {
                event.preventDefault();
                hyperspaceEngaged = true;
                playSound('C5', '4n'); // Som de engajamento
                
                // Desabilita o botão para evitar cliques duplos
                const submitButton = event.target.querySelector('button[type="submit"]');
                if (submitButton) {
                    submitButton.disabled = true;
                    submitButton.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> SALTANDO...';
                }

                // Após a animação, redireciona
                setTimeout(() => {
                    window.location.href = event.target.action;
                }, 1500);
            };
            
            loginForm.addEventListener('submit', handleLogin);
            registerForm.addEventListener('submit', handleLogin);


            // --- STATUS DO SISTEMA ANIMADO ---
            const statusMessages = [
                "ONLINE", 
                "CONEXÃO ESTÁVEL", 
                "PROPULSORES PRONTOS", 
                "AGUARDANDO COMANDO...",
                "VERIFICANDO CREDENCIAIS...",
                "SISTEMA OK"
            ];
            let messageIndex = 0;
            const statusTextEl = document.getElementById('system-status-text');
            
            function typeStatusMessage() {
                let currentMessage = statusMessages[messageIndex];
                let charIndex = 0;
                statusTextEl.textContent = '';
                
                const typingInterval = setInterval(() => {
                    if (charIndex < currentMessage.length) {
                        statusTextEl.textContent += currentMessage.charAt(charIndex);
                        charIndex++;
                    } else {
                        clearInterval(typingInterval);
                        setTimeout(() => {
                            messageIndex = (messageIndex + 1) % statusMessages.length;
                            typeStatusMessage();
                        }, 2000);
                    }
                }, 50);
            }
            typeStatusMessage();


            // --- LÓGICA DO FUNDO DE GALÁXIA ---
            const canvas = document.getElementById('galaxy-canvas');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                let stars = [];
                let animationFrameId;

                const setCanvasSize = () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                };

                const createStarfield = () => {
                    stars = [];
                    const starCount = Math.floor((canvas.width * canvas.height) / 2000);
                    for (let i = 0; i < starCount; i++) {
                        stars.push({
                            x: Math.random() * canvas.width,
                            y: Math.random() * canvas.height,
                            radius: Math.random() * 1.5 + 0.5,
                            vx: (Math.random() - 0.5) * 0.2,
                            vy: (Math.random() - 0.5) * 0.2,
                            opacity: Math.random() * 0.6 + 0.4
                        });
                    }
                };

                const animate = () => {
                    ctx.fillStyle = '#0D0F12';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    const centerX = canvas.width / 2;
                    const centerY = canvas.height / 2;

                    stars.forEach(star => {
                        // Lógica de animação
                        if (hyperspaceEngaged) {
                            // Mover estrelas para o centro
                            const dx = centerX - star.x;
                            const dy = centerY - star.y;
                            const dist = Math.sqrt(dx * dx + dy * dy);
                            
                            star.vx = (dx / dist) * 25; // Aceleração alta
                            star.vy = (dy / dist) * 25;

                            // Desenha como um rastro
                            ctx.beginPath();
                            ctx.moveTo(star.x, star.y);
                            ctx.lineTo(star.x + star.vx, star.y + star.vy);
                            ctx.strokeStyle = `rgba(224, 226, 231, ${star.opacity})`;
                            ctx.lineWidth = star.radius;
                            ctx.stroke();
                        } else {
                            // Desenha estrelas normais
                            ctx.beginPath();
                            ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                            ctx.fillStyle = `rgba(224, 226, 231, ${star.opacity})`;
                            ctx.fill();
                        }
                        
                        star.x += star.vx;
                        star.y += star.vy;

                        // Recicla estrelas que saem da tela
                        if (!hyperspaceEngaged && (star.x < 0 || star.x > canvas.width || star.y < 0 || star.y > canvas.height)) {
                           star.x = Math.random() * canvas.width;
                           star.y = Math.random() * canvas.height;
                        }
                    });

                    animationFrameId = requestAnimationFrame(animate);
                };
                
                const initAnimation = () => {
                    if (animationFrameId) cancelAnimationFrame(animationFrameId);
                    setCanvasSize();
                    createStarfield();
                    animate();
                };

                initAnimation();
                window.addEventListener('resize', initAnimation);
            }
        });
    </script>
</body>
</html>
